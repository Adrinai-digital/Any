<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Curso de Tarot</title>
        <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico"/>
        <link rel="stylesheet" href="css/cursos.css">
        <script src="https://www.youtube.com/iframe_api"></script>
    </head>
    
<header class="tarot-header">
    <div class="container">
        <h1>CURSO DE TAROT</h1>
        <p>Bienvenido al fascinante mundo del Tarot</p>
        
        <div class="video-portada tarot-video">
            <iframe 
              src="https://www.youtube.com/embed/LCuJcBZnsLw?si=hnqRwCn9Ob3jbnUs"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen>
            </iframe>
          </div>
    </div>
</header>

<body>
    <div class="tabs">
        <div class="tab active" onclick="showModule(1)">M√≥dulo 1</div>
        <div class="tab" onclick="showModule(2)">M√≥dulo 2</div>
        <div class="tab" onclick="showModule(3)">M√≥dulo 3</div>
    </div>
    <div class="whatsapp">
        <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener noreferrer">
          üì© ¬øTienes dudas? Escr√≠benos en la comunidad
        </a>
      </div>
    <section class="course-content">
    <div id="module1" class="content active">
        <h2>M√≥dulo 1</h2>
        <div class="lesson">
            <h3>Lecci√≥n 1: Introducci√≥n al curso</h3>
            <p>En este video veremos:
                <ul>
                    <li>Historia y or√≠genes del Tarot</li>
                    <li>Objetivos del curso</li>
                    <li>C√≥mo aprovechar al m√°ximo este curso</li>
                </ul>
                <p>üìÖ Este es el primer video de introducci√≥n, as√≠ que no olvides ver las dem√°s partes antes de comenzar con las clases.</p>
            <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
            
            <div class="lesson-video video-container" data-video-id="5Bz2PMS5llE" data-curso-id="3"></div>
            <a href="/archivos/Tarot_colorear.pdf" class="module-link">Descargar material del curso</a>
            <p id="module1-lesson1-status">Estado: <span class="not-completed" id="status-5Bz2PMS5llE" data-curso-id="3">No completado</span></p>
        </div>
        
        <div class="lesson">
            <h3>Lecci√≥n 2: Introducci√≥n Parte 2</h3>
            <p>En este video veremos:

                Historia y or√≠genes del Tarot
                Objetivos del curso
                C√≥mo aprovechar al m√°ximo este curso
                üìÖ Este es el primero video de introducci√≥n, as√≠ que no olvides ver las dem√°s partes antes de comenzar con las clases.</p>
                
                <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
            
                <div class="lesson-video video-container" data-video-id="XGInE6garBY" data-curso-id="3"></div>
            <p id="module1-lesson2-status">Estado: <span class="not-completed" id="status-XGInE6garBY" data-curso-id="3">No completado</span></p>
        </div>
        <div class="lesson">
            <h3>Lecci√≥n 3: Introducci√≥n a los Arcanos Mayoresüåü</h3>
            <p>En este video veremos:

                Historia y or√≠genes del Tarot
                Objetivos del curso
                C√≥mo aprovechar al m√°ximo este curso
                üìÖ Este es el primero video de introducci√≥n, as√≠ que no olvides ver las dem√°s partes antes de comenzar con las clases.</p>
                
                <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                <div class="lesson-video video-container" data-video-id="JUceZ646MAM" data-curso-id="3"></div>
                <p id="module1-lesson3-status">Estado: <span class="not-completed" id="status-JUceZ646MAM" data-curso-id="3">No completado</span></p>
        </div>
        <div class="lesson">
            <h3>Lecci√≥n 4: Introducci√≥n CONSAGRACI√ìN üåü</h3>
            <p>En este video veremos:

                Historia y or√≠genes del Tarot
                Objetivos del curso
                C√≥mo aprovechar al m√°ximo este curso
                üìÖ Este es el primero video de introducci√≥n, as√≠ que no olvides ver las dem√°s partes antes de comenzar con las clases.</p>
                
                <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                
                <div class="lesson-video video-container" data-video-id="iwZsJTai0QQ" data-curso-id="3"></div>
                <p id="module1-lesson4-status">Estado: <span class="not-completed" id="status-iwZsJTai0QQ" data-curso-id="3">No completado</span></p>
        </div>

    </div>

    <div id="module2" class="content">
        <h2>M√≥dulo 2</h2>
        <div class="lesson" >
            <h3>Tema 1: curso de tarot tema 1</h3>
                    <p>üìö Recursos adicionales:
                        üí¨ ¬øPreguntas?
                        No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.
                        Gu√≠a PDF de los Arcanos Mayores</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="Wh_LH1iarzs" data-curso-id="3"></div>
            <p id="module2-lesson1-status">Estado: <span class="not-completed" id="status-Wh_LH1iarzs" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 2,Clase 2 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="b_EInigQj_A" data-curso-id="3"></div>
            <p id="module2-lesson2-status">Estado: <span class="not-completed" id="status-b_EInigQj_A" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 2,Clase 2 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                   
                    <div class="lesson-video video-container" data-video-id="T1Sk_6ZirOs" data-curso-id="3"></div>
            <p id="module2-lesson3-status">Estado: <span class="not-completed" id="status-T1Sk_6ZirOs"data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 3,Clase 3 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="do-cAPopqzk" data-curso-id="3"></div>
            <p id="module2-lesson4-status">Estado: <span class="not-completed" id="status-do-cAPopqzk" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 3,Clase 3 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="A_KfKPXJmps" data-curso-id="3"></div>
            <p id="module2-lesson5-status">Estado: <span class="not-completed" id="status-A_KfKPXJmps" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 4,Clase 4 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="07uJ8y_tCqk" data-curso-id="3"></div>
            <p id="module2-lesson6-status">Estado: <span class="not-completed" id="status-07uJ8y_tCqk" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 4,Clase 4 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="9lI2uF7xpfc" data-curso-id="3"></div>
            <p id="module2-lesson7-status">Estado: <span class="not-completed" id="status-9lI2uF7xpfc" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 5,Clase 5 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="cKgqr1DcY-I" data-curso-id="3"></div>
            <p id="module2-lesson8-status">Estado: <span class="not-completed" id="status-cKgqr1DcY-I" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 5,Clase 5 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="IxmVAqQrolg" data-curso-id="3"></div>
            <p id="module2-lesson9-status">Estado: <span class="not-completed" id="status-IxmVAqQrolg" data-curso-id="3">No completado</span></p>
        </div>
        <div class="lesson" >
            <h3>Tema 6,Clase 6 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="f-jmmz-O2lg" data-curso-id="3"></div>
            <p id="module2-lesson10-status">Estado: <span class="not-completed" id="status-f-jmmz-O2lg" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 6,Clase 6 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="IimbZAqi6fs" data-curso-id="3"></div>
            <p id="module2-lesson11-status">Estado: <span class="not-completed" id="status-IimbZAqi6fs" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 7,Clase 7 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="PY-uxWL8OVE" data-curso-id="3"></div>
            <p id="module2-lesson12-status">Estado: <span class="not-completed" id="status-PY-uxWL8OVE" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 7,Clase 7 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="zMiqAiYPUEw" data-curso-id="3"></div>
            <p id="module2-lesson13-status">Estado: <span class="not-completed" id="status-zMiqAiYPUEw" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 8,Clase 8 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="OfYHTuI3nGA" data-curso-id="3"></div>
            <p id="module2-lesson14-status">Estado: <span class="not-completed" id="status-OfYHTuI3nGA" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 8,Clase 8 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="gFOATBk0_5o" data-curso-id="3"></div>
            <p id="module2-lesson15-status">Estado: <span class="not-completed" id="status-gFOATBk0_5o" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 9,Clase 9 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="UKmyJAAy_V0" data-curso-id="3"></div>
            <p id="module2-lesson16-status">Estado: <span class="not-completed" id="status-UKmyJAAy_V0" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 9,Clase 9 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="uHGdnnTzrk0" data-curso-id="3"></div>
            <p id="module2-lesson17-status">Estado: <span class="not-completed" id="status-uHGdnnTzrk0" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 10,Clase 10 Parte 1 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="mauUWwSFEy8" data-curso-id="3"></div>
            <p id="module2-lesson18-status">Estado: <span class="not-completed" id="status-mauUWwSFEy8" data-curso-id="3">No completado</span></p>
        </div>

        <div class="lesson" >
            <h3>Tema 10,Clase 10 Parte 2 curso de TAROT</h3>
                    <p>No dudes en dejar tus dudas en los comentarios o contactarme directamente si necesitas m√°s orientaci√≥n.</p>
                        <p>Para cualquier duda preguntar en <a href="https://chat.whatsapp.com/HbZk5RpK6xc4rdJfoKmVvP" target="_blank" rel="noopener">la comunidad</a></p>
                        <br>
                    <!-- Video incrustado -->
                    
                    <div class="lesson-video video-container" data-video-id="WU6Mxk12fnw" data-curso-id="3"></div>
            <p id="module2-lesson19-status">Estado: <span class="not-completed" id="status-WU6Mxk12fnw" data-curso-id="3">No completado</span></p>
        </div>

    </div>

    <div id="module3" class="content">
        <h2>M√≥dulo 3</h2>
        <div class="lesson">
            <h3>Lecci√≥n 1 Arcanos y Cierre</h3>
            <div class="lesson-video video-container" data-video-id="Ia0qaC1Ajpo" data-curso-id="3"></div>
            <p id="module3-lesson1-status">Estado: <span class="not-completed" id="status-Ia0qaC1Ajpo" data-curso-id="3">No completado</span></p>
        </div>
        
        <div class="lesson">
            <h3>Lecci√≥n 2 clase ultimos arcanos mayores el mundo y el loco. parte 1</h3>
            <div class="lesson-video video-container" data-video-id="qMMqIL4g2jw" data-curso-id="3"></div>
            <p id="module3-lesson2-status">Estado: <span class="not-completed" id="status-qMMqIL4g2jw" data-curso-id="3">No completado</span></p>
        </div>
        
        <div class="lesson">
            <h3>Lecci√≥n 3 cierre de los arcanos mayores, clase practica, parte 2</h3>
            <div class="lesson-video video-container" data-video-id="kEkSMFqCYPw" data-curso-id="3"></div>
            <p id="module3-lesson3-status">Estado: <span class="not-completed" id="status-kEkSMFqCYPw" data-curso-id="3">No completado</span></p>
        </div>
        <div class="lesson">
            <h3>Lecci√≥n 4 clase de cierre</h3>
            <div class="lesson-video video-container" data-video-id="biEA5_5hmo4" data-curso-id="3"></div>
            <p id="module3-lesson4-status">Estado: <span class="not-completed" id="status-biEA5_5hmo4" data-curso-id="3">No completado</span></p>
        </div>

    </div>
    </section>
    <script src="https://www.youtube.com/iframe_api"></script>
<script>
    let players = [];
    let usuarioId = null;

    // Obtener el ID del usuario desde el token
    async function obtenerUsuarioId() {
        const token = localStorage.getItem('token');
        if (!token) return null;

        try {
            const response = await fetch('/perfil-data', {
                method: 'GET',
                headers: { 'Authorization': `Bearer ${token}` }
            });

            if (!response.ok) return null;

            const data = await response.json();
            return data.usuario.id;
        } catch (error) {
            console.error('‚ùå Error al obtener usuario:', error);
            return null;
        }
    }

    // Marcar video como completado en el servidor
    function marcarComoCompletado(videoId, cursoId) {
        const token = localStorage.getItem('token');
        if (!token) {
            console.error('‚ö†Ô∏è No hay token. Usuario no autenticado.');
            return;
        }

        fetch('/marcar-completado', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify({ video_id: videoId, cursoId: cursoId })
        })
        .then(response => {
            if (response.ok) {
                console.log(`‚úÖ Video ${videoId} marcado como completado`);
                const estado = document.getElementById(`status-${videoId}`);
                if (estado) {
                    estado.textContent = 'Completado';
                    estado.classList.remove("not-completed");
                    estado.classList.add("completed");
                }
            } else {
                console.error('‚ùå Error al marcar video como completado');
            }
        })
        .catch(err => {
            console.error('‚ùå Error de red:', err);
        });
    }

    // Cargar progreso del usuario desde el backend
    async function cargarProgresoUsuario(cursoId) {
        const token = localStorage.getItem('token');
        if (!token) return;

        try {
            const response = await fetch(`/progreso?cursoId=${cursoId}`, {
                method: 'GET',
                headers: { 'Authorization': `Bearer ${token}` }
            });

            if (!response.ok) throw new Error('No se pudo obtener progreso');

            const data = await response.json();
            const completados = data.completados || [];

            completados.forEach(videoId => {
                const estado = document.getElementById(`status-${videoId}`);
                if (estado) {
                    estado.textContent = 'Completado';
                    estado.classList.remove("not-completed");
                    estado.classList.add("completed");
                }
            });

            console.log('‚úÖ Progreso cargado:', completados);
        } catch (error) {
            console.error('‚ùå Error al cargar progreso:', error);
        }
    }

    // Inicializar reproductores de YouTube cuando la API est√© lista
    function onYouTubeIframeAPIReady() {
        const videoContainers = document.querySelectorAll('.lesson-video');

        videoContainers.forEach((container, index) => {
            const videoId = container.dataset.videoId;
            const cursoId = container.dataset.cursoId;

            const playerDiv = document.createElement('div');
            const divId = `youtube-player-${index}`;
            playerDiv.id = divId;
            container.appendChild(playerDiv);

            players[index] = new YT.Player(divId, {
                height: "315",
                width: "560",
                videoId: videoId,
                events: {
                    'onStateChange': function (event) {
                        if (event.data === YT.PlayerState.ENDED && usuarioId) {
                            marcarComoCompletado(videoId, cursoId);
                        }
                    }
                }
            });
        });
    }

    // Mostrar el m√≥dulo activo
    function showModule(moduleNumber) {
        const modules = document.querySelectorAll('.content');
        const tabs = document.querySelectorAll('.tab');

        modules.forEach((mod, index) => {
            mod.classList.toggle('active', index === moduleNumber - 1);
        });

        tabs.forEach((tab, index) => {
            tab.classList.toggle('active', index === moduleNumber - 1);
        });
    }

    // Al cargar la p√°gina
    document.addEventListener("DOMContentLoaded", async () => {
        usuarioId = await obtenerUsuarioId();
        if (!usuarioId) {
            console.error('‚ùå No se pudo obtener el ID del usuario.');
            return;
        }

        showModule(1);

        const firstVideo = document.querySelector('.lesson-video');
        const cursoId = firstVideo ? firstVideo.dataset.cursoId : null;

        if (cursoId) {
            await cargarProgresoUsuario(cursoId);
        }

        if (typeof YT !== 'undefined' && YT.loaded) {
            onYouTubeIframeAPIReady();
        }
    });
</script>

      


    <script src="/js/cursos.js"></script>

</body>
</html>